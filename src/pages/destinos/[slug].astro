---
import { type CollectionEntry, getEntry } from 'astro:content';
import DestinoLayout from '../../layouts/DestinoLayout.astro';

const { slug } = Astro.params;
let destino;
let Content;

try {
	destino = await getEntry('destinos', slug);
	if (!destino) {
		return Astro.redirect('/404');
	}
	const rendered = await destino.render();
	Content = rendered.Content;
} catch (error) {
	console.error('Error loading destino:', error);
	return Astro.redirect('/404');
}
---

<DestinoLayout {...destino.data}>
	<Content />
</DestinoLayout>